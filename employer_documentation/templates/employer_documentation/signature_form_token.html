{% extends 'base.html' %}
{% load static %}
{% load crispy_forms_tags %}
{% block main_content %}
<div class="container">
    <div class="row">
        <div class="col-lg-8 offset-lg-2">
            <div class="row">
                <div class="col my-2">
                    <div class="row bg-dashboard-pagebar-color">
                        <div class="col">
                            <h5 class="my-1">Case Information</h5>
                        </div>
                    </div>
                    <div class="row mt-2">
                        <div class="col-md-6">
                            <h6>Name of Employer</h6>
                            <p>{{ object.employer_doc.employer.employer_name }}</p>
                        </div>
                        <div class="col-md-6">
                            <h6>Name of FDW</h6>
                            <p>{{ object.employer_doc.fdw.name }}</p>
                        </div>
                        <div class="col-md-6">
                            <h6>Name of Agency Employee</h6>
                            <p>{{ object.employer_doc.employer.agency_employee.name }}</p>
                        </div>
                        <div class="col-md-6">
                            <h6>Case Ref No</h6>
                            <p>{{ object.employer_doc.case_ref_no }}</p>
                        </div>
                    </div>
                </div>
            </div>
            {% with request.resolver_match.url_name as url_name %}
            <div class="row">
                <div class="col my-2">
                    <div class="row bg-dashboard-pagebar-color">
                        <div class="col">
                            <h5 class="my-1">View Documents</h5>
                        </div>
                    </div>
                    <div class="row mt-2">
                        {% if url_name == 'token_employer_signature_form_view' %}
                            <div class="col-md-6">
                                <a href="{% url 'pdf_token_employer_service_fee_schedule' slug=slug %}" target="_blank">Service Fee Schedule</a>
                            </div>
                            <div class="col-md-6">
                                <a href="#" target="_blank">Service Agreement</a>
                            </div>
                            <div class="col-md-6">
                                <a href="#" target="_blank">Transfer Consent</a>
                            </div>
                            <div class="col-md-6">
                                <a href="#" target="_blank">Work Pass Authorisation</a>
                            </div>
                            <div class="col-md-6">
                                <a href="" target="_blank">Income Tax Declaration</a>
                            </div>
                        {% endif %}

                        <!-- {% comment %} Employers & FDWs, but different URLs {% endcomment %} -->
                        {% if url_name == 'token_signature_employer_route' %}
                            <div class="col-md-6">
                                <a href="{% url 'pdf_token_employer_employment_contract' slug=slug %}" target="_blank">Employment Contract</a>
                            </div>
                            <div class="col-md-6">
                                <a href="{% url 'pdf_token_employer_repayment_schedule' slug=slug %}" target="_blank">Repayment Schedule</a>
                            </div>
                            <div class="col-md-6">
                                <a href="{% url 'pdf_token_employer_rest_day_agreement' slug=slug %}" target="_blank">Rest Day Agreement</a>
                            </div>
                            <div class="col-md-6">
                                <a href="{% url 'pdf_token_employer_job_order_route' slug=slug %}" target="_blank">Job Order</a>
                            </div>
                            <div class="col-md-6">
                                <a href="{% url 'pdf_token_employer_handover_checklist' slug=slug %}" target="_blank">Handover Checklist</a>
                            </div>
                            <!-- {% comment %}
                            Work Permit Application - Form 12B
                            <a href="{% url 'pdf_token_employer_fdw_work_permit_12b' slug=slug %}" target="_blank">PDF</a>
                            {% endcomment %} -->
                            <div class="col-md-6">
                                <a href="{% url 'pdf_token_employer_safety_agreement' slug=slug %}" target="_blank">Safety Agreement</a>
                            </div>
                        
                        {% elif url_name == 'token_signature_fdw_route' %}
                            <div class="col-md-6">
                                <a href="{% url 'pdf_token_fdw_employment_contract' slug=object.fdw_slug %}" target="_blank">Employment Contract</a>
                            </div>
                            <div class="col-md-6">
                                <a href="{% url 'pdf_token_fdw_repayment_schedule' slug=object.fdw_slug %}" target="_blank">Repayment Schedule</a>
                            </div>
                            <div class="col-md-6">
                                <a href="{% url 'pdf_token_fdw_rest_day_agreement' slug=object.fdw_slug %}" target="_blank">Rest Day Agreement</a>
                            </div>
                            <div class="col-md-6">
                                <a href="{% url 'pdf_token_fdw_job_order_route' slug=object.fdw_slug %}" target="_blank">Job Order</a>
                            </div>
                            <div class="col-md-6">
                                <a href="{% url 'pdf_token_fdw_handover_checklist' slug=object.fdw_slug %}" target="_blank">Handover Checklist</a>
                            </div>
                            <!-- {% comment %}
                            Work Permit Application - Form 12B
                            <a href="{% url 'pdf_token_fdw_fdw_work_permit_12b' slug=object.fdw_slug %}" target="_blank">PDF</a>
                            {% endcomment %} -->
                            <div class="col-md-6">
                                <a href="{% url 'pdf_token_fdw_safety_agreement' slug=object.fdw_slug %}" target="_blank">Safety Agreement</a>
                            </div>
                        {% endif %}
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col my-2">
                    <div class="row bg-dashboard-pagebar-color">
                        <div class="col">
                            <h5 class="my-1">Signature</h5>
                        </div>
                    </div>
                    <div class="row mt-2">
                        <div class="col">
                            {% include 'components/crispy-form-error.html' %}
                            {% crispy form %}
                        </div>
                    </div>
                </div>
            </div>
            {% endwith %}
        </div>
    </div>
</div>

{% endblock main_content %}

{% block js %}
    {% with request.resolver_match.url_name as url_name %}  
    <script src="https://cdn.jsdelivr.net/npm/signature_pad@2.3.2/dist/signature_pad.min.js"></script>
    {% if url_name == 'token_employer_signature_form_view' %}
        {% include 'employer_documentation/snippets/signature_snippet_js.html' with signature_pad_id="employer-signature-pad" signature_input_id="id_employer_signature" signature_submit_button_id="signature-form-submit-button" signature_clear_button_id="signature-form-clear-button" %}
    {% elif url_name == 'token_employer_with_spouse_signature_form_view' %}
        {% include 'employer_documentation/snippets/signature_snippet_dual_js.html' with signature_pad_1_id="employer-signature-pad" signature_input_1_id="id_employer_signature" signature_pad_2_id="employer-spouse-signature-pad" signature_input_2_id="id_employer_spouse_signature" signature_submit_button_id="signature-form-submit-button" signature_clear_button_id="signature-form-clear-button" %}
    {% elif url_name == 'token_employer_spouse_signature_form_view' %}
        {% include 'employer_documentation/snippets/signature_snippet_js.html' with signature_pad_id="employer-spouse-signature-pad" signature_input_id="id_employer_spouse_signature" signature_submit_button_id="signature-form-submit-button" signature_clear_button_id="signature-form-clear-button" %}
    {% endif %}
    {% endwith %}
{% endblock js %}