{% extends 'employer_documentation/base-ed-template.html' %}

{% block sidenav_extra %}
<div class="row">
    <div class="col px-0">
        <a class="nav-link side-nav-link " href="{% url 'employer_create_route' %}">
        <p class="m-1 pl-2">Add Employer</p>
        </a>
    </div>
</div>
{% endblock sidenav_extra %}

{% block ed_section %}
    <h1>Employers</h1>

    <form method="get" class="form-inline">
        <div class="form-group mb-2">
            <label for="search-box-employer" class="mr-2">Employer</label>
            <input type="search" name="employer" id="search-box-employer" class="form-control" placeholder="Employer name">
        </div>
    </form>
    
    <table class="table">
        <thead>
            <tr>
                <th scope="col">Employer Name</th>
                <th scope="col">Email</th>
                <th scope="col">Mobile</th>
                <th scope="col">Documentation</th>
                <th scope="col">Edit Profile</th>
                <th scope="col">ID - Agent</th>
            </tr>
        </thead>
        <tbody>
        {% for object in object_list %}
            <tr>
                <td><a href="{% url 'employer_detail_route' employer_pk=object.pk %}">{{ object.employer_name }}</a></td>
                <td><a href="{% url 'employer_detail_route' employer_pk=object.pk %}">{{ object.employer_email|slice:":3" }}&#9679;&#9679;&#9679;&#9679;&#9679;{{ object.employer_email|slice:"-3:" }}</a></td>
                <td><a href="{% url 'employer_detail_route' employer_pk=object.pk %}">{{ object.employer_mobile_number|slice:":4" }}&#9679;&#9679;&#9679;&#9679;</a></td>
                <td>{% if object.rn_ed_employer.all %}<a href="{% url 'employerdoc_list_route' employer_pk=object.pk %}">View Documentation</a>{% else %}<a href="{% url 'employerdoc_create_route' employer_pk=object.pk %}">Create Documentation</a>{% endif %}</td>
                <td><a href="{% url 'employer_update_route' employer_pk=object.pk %}">Edit</a></td>
                <td>{{ object.agency_employee.ea_personnel_number }} - {{ object.agency_employee.first_name }} {{ object.agency_employee.last_name }}</td>
            </tr>
        {% empty %}
            <p><tr><a href="{% url 'employer_create_route' %}">Click here to add new employer profile.</a></tr></p>
        {% endfor %}
        </tbody>
    </table>

    <br>
    {% include 'pagination.html' %}
{% endblock ed_section %}