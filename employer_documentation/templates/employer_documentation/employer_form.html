{% extends 'employer_documentation/base-ed-template.html' %}

{% block sidenav_extra %}
<div class="row">
    <div class="col px-0">
        <a class="nav-link side-nav-link " href="{% url 'employer_list_route' %}" class="">
        <p class="m-1 pl-2">Employer List</p>
        </a>
    </div>
</div>
{% if object.employer_doc %}
    <!-- {% comment %}Sub Documents{% endcomment %} -->
    {% include 'employer_documentation/sidenav_subdocument_snippet.html' %}
{% elif object.employer %}
    <!-- {% comment %}Documents{% endcomment %} -->
    {% include 'employer_documentation/sidenav_document_snippet.html' %}

    <li class="sidenav__list-item">
        <a data-toggle="collapse" href="#forms" role="button" aria-expanded="false" aria-controls="forms">Navigate Form Sections<i class="fa fa-caret-down float-right align-middle pt-1"></i></a>
    </li>
    <ul class="collapse sidenav__list pl-3" id="forms">
        <li class="sidenav__list-item">
            <a href="#fee-schedule">Service & Fees Schedule</a>
        </li>
        <li class="sidenav__list-item">
            <a href="#service-agreement">Service Agreement</a>
        </li>
        <li class="sidenav__list-item">
            <a href="#employment-contract">Employment Contract</a>
        </li>
        <li class="sidenav__list-item">
            <a href="#invoice-official-receipt">Official Receipts</a>
        </li>
        <li class="sidenav__list-item">
            <a href="#signature">Signatures</a>
        </li>
    </ul>
{% elif object.employer_name %}
    <!-- {% comment %}Employers{% endcomment %} -->
    <div class="row">
        <div class="col px-0">
            <a class="nav-link side-nav-link " href="{% url 'employer_detail_route' employer_pk=object.pk %}" class="">
            <p class="m-1 pl-2">Employer Profile</p>
            </a>
        </div>
    </div>
{% endif %}
{% endblock sidenav_extra %}

{% block ed_section %}
    {% if form.errors %}
        {% for field in form %}
            {% for error in field.errors %}
            <div class="alert alert-danger">
                <strong>{{ error|escape }}</strong>
            </div>
            {% endfor %}
        {% endfor %}
    {% endif %}
    
    <div class="container">
        {% block form %}{% endblock form %}
    </div>
{% endblock ed_section %}

{% block js %}
    <script>
        let replacementFdwSelector = document.querySelector('#id_fdw_is_replacement');
        if (replacementFdwSelector) {
            let fdwReplacedField = document.querySelector('#div_id_fdw_replaced');
            let loanTransferredField = document.querySelector('#div_id_b4_loan_transferred');
            if (replacementFdwSelector.value!=='True') {
                fdwReplacedField.hidden = true;
                loanTransferredField.hidden = true;
            }
            replacementFdwSelector.addEventListener('change', () => {
                if (replacementFdwSelector.value!=='True') {
                fdwReplacedField.hidden = true;
                loanTransferredField.hidden = true;
                }
                else {
                fdwReplacedField.hidden = false;
                loanTransferredField.hidden = false;
                }
            })
        }
    </script>
{% endblock js %}
