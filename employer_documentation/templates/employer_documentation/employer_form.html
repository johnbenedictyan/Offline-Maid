{% extends 'employer_documentation/base-ed-template.html' %}

{% block sidenav_extra %}
{% if object.employer_doc %}
    <!-- {% comment %}Sub Documents{% endcomment %} -->
    {% include 'employer_documentation/sidenav_subdocument_snippet.html' %}
{% elif object.employer %}
    <!-- {% comment %}Documents{% endcomment %} -->
    {% include 'employer_documentation/sidenav_document_snippet.html' %}

{% elif object.employer_name %}
    <!-- {% comment %}Employers{% endcomment %} -->
    <div class="row">
        <div class="col px-0">
            <a class="nav-link side-nav-link " href="{% url 'employer_detail_route' level_0_pk=object.pk %}">
            <p class="m-1 pl-2">Employer Profile</p>
            </a>
        </div>
    </div>
    {% if object.rn_sponsor_employer %}
    <div class="row">
        <div class="col px-0">
            <a class="nav-link side-nav-link {% if url_name == 'employer_sponsor_update_route' %}active{% endif %}" href="{% url 'employer_sponsor_update_route' level_0_pk=object.pk level_1_pk=object.rn_sponsor_employer.pk %}">
            <p class="m-1 pl-2">Sponsor Update</p>
            </a>
        </div>
    </div>
    {% endif %}
    
    {% if object.rn_ja_employer %}
    <div class="row">
        <div class="col px-0">
            <a class="nav-link side-nav-link {% if url_name == 'employer_joint_applicant_update_route' %}active{% endif %}" href="{% url 'employer_joint_applicant_update_route' level_0_pk=object.pk level_1_pk=object.rn_ja_employer.pk %}">
            <p class="m-1 pl-2">Joint Applicant Update</p>
            </a>
        </div>
    </div>
    {% endif %}
{% endif %}
{% endblock sidenav_extra %}

{% block ed_section %}
    {% if form.errors %}
        {% for field in form %}
            {% for error in field.errors %}
            <div class="alert alert-danger">
                <strong>{{ error|escape }}</strong>
            </div>
            {% endfor %}
        {% endfor %}
    {% endif %}
    
    <div class="container">
        {% block form %}{% endblock form %}
    </div>
{% endblock ed_section %}

{% block js %}
    <script>
        
        // Token URL copy
        let copyBtn = document.querySelector('#copy-button');
        if (copyBtn) {
            copyBtn.addEventListener('click', () => {
                let copyElement = document.getElementById("copy-id");
                navigator.clipboard.writeText(copyElement.value)
                    .then(() => {
                        // Animate copy button
                        copyElement.animate([
                            { transform: 'scale(1)' },
                            { transform: 'scale(1)', backgroundColor: '#666666', color: 'white', },
                            { transform: 'scale(1)' },
                        ], {
                            duration: 500, //milliseconds
                            easing: 'ease-in', //'linear', a bezier curve, etc.
                            delay: 0, //milliseconds
                            iterations: 1, //or a number
                            direction: 'normal', //'normal', 'reverse', etc.
                            fill: 'forwards' //'backwards', 'both', 'none', 'auto'
                        });
                    })
                    .catch(err => {
                        console.log('Error in copying text: ', err);
                    });
            })
        }
    </script>
{% endblock js %}
