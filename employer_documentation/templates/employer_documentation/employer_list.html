{% extends 'employer_documentation/base-ed-template.html' %}

{% block sidenav_extra %}
{% endblock sidenav_extra %}

{% block ed_section %}
<div class="mx-3 ml-md-0">
    <h1>Employers</h1>

    <form method="get">
        <div class="form-row">
            <div class="col-md-6 input-group mb-3">
                <input type="search" name="search" class="form-control input-text" placeholder="Search employers....">
                <div class="input-group-append">
                    <button class="btn btn-primary" type="button"><i class="fa fa-search"></i></button>
                </div>
            </div>
    </form>
</div>

<div>
    <table class="table">
        <thead>
            <tr>
                <th scope="col">Employer Name</th>
                <th scope="col">Email</th>
                <th scope="col">Mobile</th>
                <th scope="col">Documentation</th>
                <th scope="col">Edit Profile</th>
                <th scope="col">ID - Agent</th>
            </tr>
        </thead>
        <tbody>
        {% for object in object_list %}
            <tr>
                <td><a href="{% url 'employer_detail_route' employer_pk=object.pk %}">{{ object.employer_name }}</a></td>
                <td><a href="{% url 'employer_detail_route' employer_pk=object.pk %}">{{ object.employer_email|slice:":3" }}&#9679;&#9679;&#9679;&#9679;&#9679;{{ object.employer_email|slice:"-3:" }}</a></td>
                <td><a href="{% url 'employer_detail_route' employer_pk=object.pk %}">{{ object.employer_mobile_number|slice:":4" }}&#9679;&#9679;&#9679;&#9679;</a></td>
                <td>{% if object.rn_ed_employer.all %}<a href="{% url 'employerdoc_list_route' employer_pk=object.pk %}">View Documentation</a>{% else %}<a href="{% url 'employerdoc_create_route' employer_pk=object.pk %}">Create Documentation</a>{% endif %}</td>
                <td><a href="{% url 'employer_update_route' employer_pk=object.pk %}">Edit</a></td>
                <td>{{ object.agency_employee.ea_personnel_number }} - {{ object.agency_employee.first_name }} {{ object.agency_employee.last_name }}</td>
            </tr>
        {% empty %}
            <p><tr><a href="{% url 'employer_create_route' %}">Click here to add new employer profile.</a></tr></p>
        {% endfor %}
        </tbody>
    </table>
</div>

<div class="mt-2 mb-4">
{% include 'pagination.html' %}
</div>
{% endblock ed_section %}