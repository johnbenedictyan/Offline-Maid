{% extends 'dashboard-base.html' %}
{% block dashboard_section %}
<section>
    <div class="container">
        <div class="limiter">
            <div class="container-table100">
                <div class="wrap-table100">
                    <div class="row table-header">
                        <div class="col">
                            <h5 class="pt-3 pl-4 mt-2 ml-1 d-inline-block">Agency Employee Accounts</h5>
                            {% if authority == 'Agency Owners' or authority == 'Agency Administrators' %}
                            <a href="{% url 'agency_employee_create' %}" class="btn btn-warning mr-4 my-3 float-right">Add New Account</a>
                            {% endif %}
                        </div>
                    </div>
                    <div class="table">
                        <div class="table-row account-table-row header">
                            <div class="cell">
                                S/N
                            </div>
                            <div class="cell">
                                Name
                            </div>
                            <div class="cell">
                                Email
                            </div>
                            <div class="cell">
                                EA Personnel No
                            </div>
                            <div class="cell">
                                Type
                            </div>
                            <div class="cell">
                                Branch
                            </div>
                            <div class="cell">
                                Actions
                            </div>
                        </div>
                        {% for account in accounts %}
                            <div class="table-row account-table-row">
                                <div class="cell" data-title="S/N">
                                    {{account.pk}}
                                </div>
                                <div class="cell" data-title="Name">
                                    {{account.first_name}} {{account.last_name}}
                                </div>
                                <div class="cell" data-title="Email">
                                    {{account.user.email}}
                                </div>
                                <div class="cell" data-title="EA Personnel No">
                                    {{account.ea_personnel_number}}
                                </div>
                                <div class="cell" data-title="Type">
                                    {{account.get_role_display}}
                                </div>
                                <div class="cell" data-title="Branch">
                                    {{account.branch.name}}
                                </div>
                                <div class="cell" data-title="Actions">
                                    <a href="{% url 'agency_employee_update' account.pk %}" class="btn btn-primary">Modify</a>
                                </div>
                            </div>
                        {% endfor %}
                    </div>
                    <div class="row table-empty-footer">
                        <div class="col text-center">
                            {% if not accounts %}
                            <p class="mt-3">No employee accounts found!</p>
                            {% endif %}
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
{% endblock dashboard_section %}