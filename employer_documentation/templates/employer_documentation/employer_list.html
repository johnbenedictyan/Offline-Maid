{% extends 'employer_documentation/base-ed-template.html' %}

{% block sidenav_extra %}
{% endblock sidenav_extra %}

{% block ed_section %}
<div class="mx-3 ml-md-0">
    <h1>Employers</h1>

    <form method="get">
        <div class="form-row">
            <div class="col-md-6 input-group mb-3">
                <input type="search" name="search" class="form-control input-text" placeholder="Search name, NRIC, email, mobile..." value="{{ request.GET.search }}">
                <div class="input-group-append">
                    <button class="btn btn-primary" type="submit"><i class="fa fa-search"></i></button>
                </div>
            </div>
        </div>
    </form>
</div>

<div>
    <div class="d-flex row justify-content-end mx-0 pr-3 pb-3">
        <a href="{% url 'employer_create_route' %}" class="btn btn-secondary btn-sm">Add Employer</a>
    </div>

    <table class="table table-hover">
        <thead>
            <tr>
                <th scope="col">Employer Name</th>
                <th scope="col">Email</th>
                <th scope="col">Mobile</th>
                <th scope="col">Documentation</th>
                <th scope="col">Edit Profile</th>
                <th scope="col">ID - Agent</th>
            </tr>
        </thead>
        <tbody>
        {% if object_list.count %}
            {% for object in object_list %}
                <tr>
                    <td><a href="{% url 'employer_detail_route' employer_pk=object.pk %}">{{ object.employer_name }}</a></td>
                    <td><a href="{% url 'employer_detail_route' employer_pk=object.pk %}">{{ object.employer_email|slice:":3" }}&#9679;&#9679;&#9679;&#9679;&#9679;{{ object.employer_email|slice:"-3:" }}</a></td>
                    <td><a href="{% url 'employer_detail_route' employer_pk=object.pk %}">{{ object.employer_mobile_number|slice:":4" }}&#9679;&#9679;&#9679;&#9679;</a></td>
                    <td>{% if object.rn_ed_employer.all %}<a href="{% url 'employerdoc_list_route' employer_pk=object.pk %}">View Documentation</a>{% else %}<a href="{% url 'employerdoc_create_route' employer_pk=object.pk %}">Create Documentation</a>{% endif %}</td>
                    <td><a href="{% url 'employer_update_route' employer_pk=object.pk %}">Edit</a></td>
                    <td>{{ object.agency_employee.ea_personnel_number }} - {{ object.agency_employee.first_name }} {{ object.agency_employee.last_name }}</td>
                </tr>
            {% endfor %}
        {% else %}
                <tr>
                    <td colspan="6">No results found...</td>
                </tr>
        {% endif %}
        </tbody>
    </table>
    
    <!-- {% comment %}
    <dl class="row mx-0">
        <dt class="col-lg-2 d-none d-lg-block">Employer Name</dt>
        <dt class="col-lg-2 d-none d-lg-block">Email</dt>
        <dt class="col-lg-2 d-none d-lg-block">Mobile</dt>
        <dt class="col-lg-2 d-none d-lg-block">Documentation</dt>
        <dt class="col-lg-2 d-none d-lg-block">ID - Agent</dt>
        <dt class="col-lg-2 d-none d-lg-block mb-5">Action</dt>

        {% for object in object_list %}
            <dt class="col-6 d-lg-none">Employer Name</dt>
            <dd class="col-6 col-lg-2"><a href="{% url 'employer_detail_route' employer_pk=object.pk %}">{{ object.employer_name }}</a></dd>
            <dt class="col-6 d-lg-none">Email</dt>                
            <dd class="col-6 col-lg-2"><a href="{% url 'employer_detail_route' employer_pk=object.pk %}">{{ object.employer_email|slice:":3" }}&#9679;&#9679;&#9679;&#9679;&#9679;{{ object.employer_email|slice:"-3:" }}</a></dd>
            <dt class="col-6 d-lg-none">Mobile</dt>
            <dd class="col-6 col-lg-2"><a href="{% url 'employer_detail_route' employer_pk=object.pk %}">{{ object.employer_mobile_number|slice:":4" }}&#9679;&#9679;&#9679;&#9679;</a></dd>
            <dt class="col-6 d-lg-none">Documentation</dt>
            <dd class="col-6 col-lg-2">{% if object.rn_ed_employer.all %}<a href="{% url 'employerdoc_list_route' employer_pk=object.pk %}">View Documentation</a>{% else %}<a href="{% url 'employerdoc_create_route' employer_pk=object.pk %}">Create Documentation</a>{% endif %}</dd>
            <dt class="col-6 d-lg-none">ID - Agent</dt>
            <dd class="col-6 col-lg-2">{{ object.agency_employee.ea_personnel_number }} - {{ object.agency_employee.first_name }} {{ object.agency_employee.last_name }}</dd>
            <dt class="col-6 d-lg-none">Action</dt>
            <dd class="col-6 col-lg-2 mb-5"><a href="{% url 'employer_update_route' employer_pk=object.pk %}">Edit</a></dd>
            <dt class="col-6 d-lg-none">&emsp;</dt>
            <dd class="col-6 d-lg-none">&emsp;</dd>
        {% endfor %}
    </dl>
    {% endcomment %} -->
</div>

<div class="mt-2 mb-4">
{% include 'pagination.html' %}
</div>
{% endblock ed_section %}