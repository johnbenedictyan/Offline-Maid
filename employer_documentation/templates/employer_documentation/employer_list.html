{% extends 'employer_documentation/base-ed-template.html' %}

{% block ed_section %}
<div class="mx-0">
    <h3>Employers</h3>

    <form method="get">
        <div class="form-row">
            <div class="col-md-6 input-group mb-3">
                <input type="search" name="search" class="form-control input-text" placeholder="Search name, email, mobile..." value="{{ request.GET.search }}">
                <div class="input-group-append">
                    <button class="btn btn-primary" type="submit"><i class="fa fa-search"></i></button>
                </div>
            </div>
            <div class="col-md-6 d-flex justify-content-end">
                <span><a href="{% url 'employer_create_route' %}" class="btn btn-secondary">Add Employer</a></span>
            </div>
        </div>
    </form>
</div>

<div class="custom-table">
    <div class="d-none d-xl-block">
        <!-- Display for xl screens and above -->
        <div class="row mx-0 custom-table-header">
            <div class="col">Employer</div>
            <div class="col">Email</div>
            <div class="col">Mobile</div>
            <div class="col">Cases</div>
            <div class="col">Staff</div>
            <div class="col">Action</div>
        </div>
    </div>
    <div class="row mx-0 custom-table-body">
        {% if object_list.count %}
            {% for object in object_list %}
                <div class="col-12 px-0 custom-table-dataset">
                    <div class="clickable d-none d-xl-block">
                        <!-- Display for xl screens and above -->
                        <div class="row mx-0 custom-table-data">
                            <div class="col"><a href="{% url 'employer_update_route' employer_pk=object.pk %}">Name:&emsp;{{ object.employer_name }}<br>NRIC:&emsp;{{ object.get_nric_partial }}</a></div>
                            <div class="col"><a href="{% url 'employer_update_route' employer_pk=object.pk %}">{{ object.get_email_partial }}</a></div>
                            <div class="col"><a href="{% url 'employer_update_route' employer_pk=object.pk %}">{{ object.mobile_partial_sg }}</a></div>
                            <div class="col">{% if object.rn_ed_employer.all %}<a href="{% url 'employerdoc_list_route' employer_pk=object.pk %}">View Documents</a>{% else %}<a href="{% url 'employerdoc_create_route' employer_pk=object.pk %}">Create Documentation</a>{% endif %}</div>
                            <div class="col">{{ object.agency_employee.ea_personnel_number }}<br>{{ object.agency_employee.name }}</div>
                            <div class="col">
                                <a href="{% url 'employer_update_route' employer_pk=object.pk %}"><i class="fas fa-edit"></i></a>&emsp;
                                {% comment %}{% if request.user.groups.all.0.name == 'Agency Owners' %}<a href="{% url 'employer_delete_route' employer_pk=object.pk %}"><i class="fas fa-trash"></i></a>{% endif %}{% endcomment %}
                            </div>
                        </div>
                    </div>
                    <div class="clickable d-xl-none">
                        <!-- Display for lg screens and smaller -->
                        {% with class_col_left="col-6" class_col_right="col-6" %}
                        <div class="row mx-0 custom-table-data">
                            <div class="{{ class_col_left }}">Employer</div>
                            <div class="{{ class_col_right }}"><a href="{% url 'employer_detail_route' employer_pk=object.pk %}">Name:&emsp;{{ object.employer_name }}<br>NRIC:&emsp;{{ object.get_nric_partial }}</a></div>
                        </div>
                        <div class="row mx-0 custom-table-data">
                            <div class="{{ class_col_left }}">Email</div>
                            <div class="{{ class_col_right }}"><a href="{% url 'employer_detail_route' employer_pk=object.pk %}">{{ object.employer_email|slice:":3" }}&#9679;&#9679;&#9679;&#9679;&#9679;{{ object.employer_email|slice:"-3:" }}</a></div>
                        </div>
                        <div class="row mx-0 custom-table-data">
                            <div class="{{ class_col_left }}">Mobile</div>
                            <div class="{{ class_col_right }}"><a href="{% url 'employer_detail_route' employer_pk=object.pk %}">{{ object.employer_mobile_number|slice:":4" }}&#9679;&#9679;&#9679;&#9679;</a></div>
                        </div>
                        <div class="row mx-0 custom-table-data">
                            <div class="{{ class_col_left }}">Cases</div>
                            <div class="{{ class_col_right }}">{% if object.rn_ed_employer.all %}<a href="{% url 'employerdoc_list_route' employer_pk=object.pk %}">View Documents</a>{% else %}<a href="{% url 'employerdoc_create_route' employer_pk=object.pk %}">Create Documentation</a>{% endif %}</div>
                        </div>
                        <div class="row mx-0 custom-table-data">
                            <div class="{{ class_col_left }}">Staff</div>
                            <div class="{{ class_col_right }}">{{ object.agency_employee.ea_personnel_number }}<br>{{ object.agency_employee.name }}</div>
                        </div>
                        <div class="row mx-0 custom-table-data">
                            <div class="{{ class_col_left }}">Action</div>
                            <div class="{{ class_col_right }}">
                                <a href="{% url 'employer_update_route' employer_pk=object.pk %}"><i class="fas fa-edit"></i></a>&emsp;
                                {% comment %}{% if request.user.groups.all.0.name == 'Agency Owners' %}<a href="{% url 'employer_delete_route' employer_pk=object.pk %}"><i class="fas fa-trash"></i></a>{% endif %}{% endcomment %}
                            </div>
                        </div>
                        {% endwith %}
                    </div>
                </div>
            {% endfor %}
        {% endif %}
    </div>
</div>

<div class="mt-2 mb-4">
{% include 'pagination.html' %}
</div>
{% endblock ed_section %}